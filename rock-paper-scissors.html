<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Rock Paper Scissors</title>
    </head> 

    <body>
        <script>
            function computerPlay() {
                while (true) {
                    const selection = Math.floor(Math.random() * 10)

                    if (selection === 0) {
                        continue;
                    }  else if (selection < 4) {
                        return 'rock';
                    }  else if (selection < 7) {
                        return 'paper';
                    }  else {
                        return 'scissors';
                    }
                }
            }

            let winTally = 0;
            let lossTally = 0;

            let overallWin = `You win the game with a score of ${winTally} to ${lossTally}!`;
            let overallLose = `Computer wins the game with a score of ${lossTally} to ${winTally}!`;
            let tieGame = `It's a tie game! Player and Computer both scored ${winTally}!`;
            
            function game() {
                for (let i = 0; i < 5; i++) {
                    const playerSelection = prompt('Rock, paper, or scissors? Make your choice!').toLowerCase();
                    const computerSelection = computerPlay();

                    console.log('Computer chose:' , computerSelection);

                    const win = 'You win! ' + playerSelection + ' beats ' + computerSelection + '!';
                    const lose = 'You lose! ' + computerSelection + ' beats ' + playerSelection + '!';
                    const tie = 'It\'s a tie! Play again!';

                    function playRound(playerSelection, computerSelection) {

                        if (playerSelection === 'rock' && computerSelection === 'scissors') {
                            return win;
                        }  else if (playerSelection === 'scissors' && computerSelection === 'rock') {
                            return lose;
                        }  else if (playerSelection === 'paper' && computerSelection === 'rock') {
                            return win;
                        }  else if (playerSelection === 'rock' && computerSelection === 'paper') {
                            return lose;
                        }  else if (playerSelection === 'scissors' && computerSelection === 'paper') {
                            return win;
                        }  else if (playerSelection === 'paper' && computerSelection === 'scissors') {
                            return lose;
                        }  else {
                            return tie;
                        }
                    }

                    console.log(playRound(playerSelection, computerSelection));

                
                    if (playRound(playerSelection, computerSelection) === win) {
                        winTally = winTally++;
                    }  else if (playRound(playerSelection, computerSelection) === lose) {
                        lossTally = lossTally++;
                    }  else {
                        continue;
                    }
                }

                if (winTally > lossTally) {
                    return overallWin;
                } else if (lossTally > winTally) {
                    return overallLose;
                } else {
                    return tieGame;
                }
            }

            console.log(game());
        </script>
    </body>
</html>